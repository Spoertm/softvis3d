<!--

    SoftVis3D Sonar plugin
    Copyright (C) 2016 Stefan Rinderle
    stefan@rinderle.info

    This program is free software; you can redistribute it and/or
    modify it under the terms of the GNU Lesser General Public
    License as published by the Free Software Foundation; either
    version 3 of the License, or (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
    Lesser General Public License for more details.

    You should have received a copy of the GNU Lesser General Public
    License along with this program; if not, write to the Free Software
    Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02

-->
<div id="file-loader" class="closeLoader" ng-controller="FileLoaderController as loader" ng-cloak>
    <div id="loader-buttons">
        <div class="load-button" ng-class="{'loadButtonStayActive' : loader.state.city}"
             ng-click="loader.showTab('city');">City
        </div>
        <div class="load-button" ng-class="{'loadButtonStayActive' : loader.state.custom}"
             ng-click="loader.showTab('custom');">Custom
        </div>
        <div class="load-button" ng-class="{'loadButtonStayActive' : loader.state.info}"
             ng-click="loader.showTab('info');" ng-show="loader.infoInnerState != 'idle'">Info
        </div>

        <div href="#" class="close closeLoader" ng-click="viewer.toggleLoader()">X</div>
    </div>
    <div class="loader-options">
        <div id="city-loader" class="loader-options" ng-show="loader.state.city" ng-cloak>
            <p>
                The code city view is focused on the structure
                and file metrics of the project.<br/>
                Folders or packages are shown as districts, files as buildings. The building footprint and height are
                dependent on two arbitrary sonar metrics.
            </p>
            <br/>
            <select ng-model="loader.cityInnerState">
                <option value="complexity" label="Complexity and lines">Complexity
                    and lines
                </option>
                <option value="issues" label="Issues and lines">Issues
                    and lines
                </option>
                <option value="functions" label="Functions and lines">Functions
                    and lines
                </option>
            </select>
            <br/><br/>

            <div ng-show="loader.cityInnerState === 'complexity'">
                The calculated complexity for each file is the base for the building footprint. The lines of
                code metric is used for the building height.
                Search for skyscraper buildings and especially for ones with a big footprint. Also building
                small buildings (height) with a big footprint (like warehouses) should be interesting.
            </div>
            <div ng-show="loader.cityInnerState === 'issues'">
                The calculated issue count for each file is the base for the building footprint. The lines of
                code metric is used for the building height.
                Search for skyscraper buildings and especially for ones with a big footprint. Also building
                small buildings (height) with a big footprint (like warehouses) should be interesting.
            </div>
            <div ng-show="loader.cityInnerState === 'functions'">
                The function count per file is the base for the building footprint. The lines of
                code metric is used for the building height.
                Search for skyscraper buildings and especially for ones with a small footprint.
            </div>
            <br/>
            <button ng-click="loader.submitCityForm()" ng-disabled="!loader.configLoaded">Show</button>
        </div>
        <div id="custom-loader" class="loader-options" ng-show="loader.state.custom" ng-cloak>
            <div id="costum-layout" class="layout-options">
                City Layout:<br />
                <select name="layout" ng-options="item.key as item.name for item in loader.availableLayouts"
                        ng-model="loader.layoutAlgorithm" style="width: 200px;"></select>
            </div>


            Building footprint metric:<br/>
            <select name="metric1" ng-options="item.key as item.name for item in loader.availableMetrics"
                    ng-model="loader.customSelectMetrics.metric1" style="width: 200px;"></select>

            <br/><br/>
            Building height metric:<br/>
            <select name="metric2" ng-options="item.key as item.name for item in loader.availableMetrics"
                    ng-model="loader.customSelectMetrics.metric2" style="width: 200px;"></select>

            <br/><br/>
            Building color metric:<br/>
            <select name="metric3" ng-options="item.key as item.name for item in loader.availableColorMetrics"
                    ng-model="loader.customSelectMetrics.metric3" style="width: 200px;"></select>

            <br/><br/>
            <button ng-click="loader.loadCustomView()" ng-disabled="!loader.configLoaded">Show</button>
        </div>
        <div class="loader-options" ng-show="loader.state.info" ng-cloak>
            <div ng-show="loader.infoInnerState === 'idle'">
                Idle
            </div>
            <div ng-show="loader.infoInnerState === 'loading'" style="text-align: center;">
                <br/><br/><br/>
                <img ng-src="{{loader.BASE_PATH}}/static/softvis3d/images/ajax-loader.gif" alt="Loader"/>
                <br/><br/>

                <p>Please wait...</p>
            </div>
            <div ng-show="loader.infoInnerState === 'error'" style="text-align: center;">
                <h1>Ups. An error occurred:</h1>

                <p>
                    <br/>
                    {{loader.exceptionMessage}}
                </p>
            </div>
        </div>
        <div class="visit-project">
            <p>
                Please also take a look at the <a href="http://softvis3d.com/" target="_blank">project web page</a> and
                the <a  href="http://softvis3d.com/#/details/usage" target="_blank">usage guide</a>.
            </p>
        </div>
    </div>
</div>
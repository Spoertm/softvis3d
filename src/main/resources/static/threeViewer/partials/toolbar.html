<!--

    SoftVis3D Sonar plugin
    Copyright (C) 2014 - Stefan Rinderle
    stefan@rinderle.info

    SoftVis3D Sonar plugin can not be copied and/or distributed without the express
    permission of Stefan Rinderle.

-->
<div id="toolbar" ng-controller="ToolbarController as toolbar" ng-show="toolbar.node || toolbar.edge" ng-cloak>
    <h2>Toolbar</h2><a href="#" class="close" ng-click="viewer.hideToolbar()">X</a>

        <!-- NODE MAIN INFO -->

        <button type='button' ng-click='toolbar.showAllSceneElements();'>Show all objects (reset)</button>
        <br/>
        <hr/>

        <div ng-show="toolbar.node">
            <h2>{{toolbar.node.name}}
                <span ng-show="!toolbar.node.isNode">({{toolbar.node.footprintMetricValue}} / {{toolbar.node.heightMetricValue}})</span>
            </h2>
            <br/>
            <button ng-show="toolbar.node.isNode" type='button' ng-click='toolbar.hideAllSceneElementsExceptIdTree(toolbar.node.id);'>Focus this
            </button>
        </div>

        <!-- EDGE MAIN INFO -->

        <div ng-if="toolbar.edge">
            <h2>
                {{toolbar.edge.sourceName}} -> {{toolbar.edge.destinationName}}
                ({{toolbar.edge.includingDependencies.length}})
            </h2>
            <br/>
            <button type='button' ng-click='toolbar.selectAllDependentDependencies(toolbar.edge);'>
                Select all depending
            </button>
            <br/><br/>
        </div>

        <hr/>

        <!-- NODE INCLUDING EDGE DETAILS -->

        <div ng-if="(toolbar.inEdges.length + toolbar.outEdges.length) > 0">
            <br/>

            <h3>
                <img ng-hide="toolbar.displayEdges" ng-click="toolbar.triggerDisplayEdges();" style="vertical-align: top;"
                     src="/static/softVis3D/images/tree_plus.gif"/>
                <img ng-show="toolbar.displayEdges" ng-click="toolbar.triggerDisplayEdges();" style="vertical-align: top;"
                     src="/static/softVis3D/images/tree_minus.gif"/>
                Dependencies ({{toolbar.inEdges.length + toolbar.outEdges.length}})
            </h3>
            <ul ng-show="toolbar.displayEdges" style="list-style: none;">
                <h3>Inbound</h3>
                <li ng-repeat="edge in toolbar.inEdges">
                    <img ng-hide="edge.displayDetails" ng-click="toolbar.triggerDisplayEdgeDetails(edge);" style="vertical-align: top;"
                         src="/static/softVis3D/images/tree_plus.gif"/>
                    <img ng-show="edge.displayDetails" ng-click="toolbar.triggerDisplayEdgeDetails(edge);" style="vertical-align: top;"
                         src="/static/softVis3D/images/tree_minus.gif"/>
                    <a href='#' ng-click="toolbar.selectAllDependentDependencies(edge);">
                        {{edge.sourceName}} -> ({{edge.includingDependencies.length}})
                    </a>
                    <ul ng-show="edge.displayDetails" style="list-style: circle;">
                        <li ng-repeat="dependency in edge.includingDependencies" ng-class="{listEven: $even}">
                            <a href='#' ng-click="toolbar.selectAllDependentDependenciesById(dependency.id);">
                                {{dependency.displayValue}}
                            </a>
                        </li>
                    </ul>
                </li>
                <h3>Outbound</h3>
                <li ng-repeat="edge in toolbar.outEdges">
                    <img ng-hide="edge.displayDetails" ng-click="toolbar.triggerDisplayEdgeDetails(edge);" style="vertical-align: top;"
                         src="/static/softVis3D/images/tree_plus.gif"/>
                    <img ng-show="edge.displayDetails" ng-click="toolbar.triggerDisplayEdgeDetails(edge);" style="vertical-align: top;"
                         src="/static/softVis3D/images/tree_minus.gif"/>
                    <a href='#' ng-click="toolbar.selectAllDependentDependencies(edge);">
                        -> {{edge.destinationName}} ({{edge.includingDependencies.length}})
                    </a>
                    <ul ng-show="edge.displayDetails" style="list-style: circle;">
                        <li ng-repeat="dependency in edge.includingDependencies" ng-class="{listEven: $even}">
                            <a href='#' ng-click="toolbar.selectAllDependentDependenciesById(dependency.id);">
                                {{dependency.displayValue}}
                            </a>
                        </li>
                    </ul>
                </li>
            </ul>
        </div>

        <!-- EDGE INCLUDING EDGE DETAILS -->
        <div ng-show="toolbar.edgeIncludingEdges">
            <h3>
                <img ng-hide="toolbar.displayEdgeIncludingEdges" ng-click="toolbar.triggerDisplayEdgeIncludingEdges();" style="vertical-align: top;"
                     src="/static/softVis3D/images/tree_plus.gif"/>
                <img ng-show="toolbar.displayEdgeIncludingEdges" ng-click="toolbar.triggerDisplayEdgeIncludingEdges();" style="vertical-align: top;"
                     src="/static/softVis3D/images/tree_minus.gif"/>
                Including dependencies
            </h3>
            <ul ng-show="toolbar.displayEdgeIncludingEdges" style="list-style: circle;">
                <li ng-repeat="dependency in toolbar.edgeIncludingEdges" ng-class="{listEven: $even}">
                    <a href='#' ng-click="toolbar.selectAllDependentDependenciesById(dependency.id);">
                        {{dependency.displayValue}}
                    </a>
                </li>
            </ul>
        </div>

        <!-- NODE NAVIGATION -->
        <div ng-show="toolbar.node.parentInfo">
            <br/>

            <h3>Parent</h3>

            <p>
                <a href='#' ng-click="toolbar.selectSceneObjectFromDetails(toolbar.node.parentInfo.id, toolbar.node.parentInfo.type);">
                    {{toolbar.node.parentInfo.name}}
                </a>
            </p>
        </div>

        <div ng-if="toolbar.node.children.length > 0">
            <br/>

            <h3>
                <img ng-hide="toolbar.displayChildren" ng-click="toolbar.triggerDisplayChildren();" style="vertical-align: text-top;"
                     src="/static/softVis3D/images/tree_plus.gif"/>
                <img ng-show="toolbar.displayChildren" ng-click="toolbar.triggerDisplayChildren();" style="vertical-align: text-top;"
                     src="/static/softVis3D/images/tree_minus.gif"/>
                Children ({{toolbar.node.children.length}})
            </h3>
            <ul ng-show="toolbar.displayChildren" style="list-style: none;">
                <li ng-repeat="child in toolbar.node.children">
                    <img ng-hide="child.isNode" style="vertical-align: text-top;"
                         src="/static/softVis3D/images/file.gif"/>
                    <img ng-show="child.isNode" style="vertical-align: text-top;"
                         src="/static/softVis3D/images/folder.gif"/>
                    <a href='#' ng-click="toolbar.selectSceneObjectFromDetails(child.id, child.type);">
                        {{ child.name | limitTo:21 }}{{child.name.length > 21 ? '...' : ''}}
                        <span ng-show="!child.isNode">({{child.footprintMetricValue}}/{{child.heightMetricValue}})</span>
                    </a>
                </li>
            </ul>
        </div>

        <!-- EDGE NAVIGATION -->
        <div ng-if="toolbar.edge">
            <h3>Source</h3>
            <a href='#' ng-click="toolbar.selectSceneObjectFromDetails(edge.sourceId, 'node');">
                {{ toolbar.edge.sourceName }}
            </a>

            <h3>Destination</h3>
            <a href='#' ng-click="toolbar.selectSceneObjectFromDetails(edge.destinationId, 'node');">
                {{ toolbar.edge.destinationName }}
            </a>
        </div>
    </div>
</div>